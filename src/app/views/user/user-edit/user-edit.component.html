<simple-notifications></simple-notifications>

<div class="content_">
    <div class="content-top">
        <div class="content_fa"> <i class="fa fa-user"></i> Usuários > Editar</div>
    </div>

    <section class="content_user">
        <div class="content-header ">
            <h5 class="content-title">CADASTRO DE USUÁRIO</h5>
        </div>
        <form name="form" (ngSubmit)="editData(f.form.valid)" #f="ngForm" novalidate>
            <!-- Custom Tabs -->
            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs">
                    <li>
                        <img src="{{accountTab}}" />
                    </li>
                    <li>
                        <img src="{{personalTab}}" />
                    </li>
                    <li>
                        <img src="{{adressTab}}" />
                    </li>
                </ul>
                <div class="tab-content">
                    <div class="tab-pane active" id="tab_1">
                        <div class="content">
                            <section class="content">
                                <div class="box-header with-border">
                                    <h5 class="box-title"> Informações da Conta
                                    </h5>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="box box-primary">
                                            <div class="box-body">
                                                <!-- select status-->
                                                <div class="form-group" [ngClass]="applyCssError(f, status)">
                                                    <label class="control-label">Status</label>
                                                    <select class="form-control" #status="ngModel" name="status" id="user_status" [(ngModel)]="user.status" required>
                                                      <option disabled>Status</option>
                                                      <option value="true">Ativo</option>
                                                      <option value="false">Inatí­vo</option>
                                                    </select>
                                                    <app-control-field-error [showError]="verifyValidSubmitted(f, status)" msgError="Selecione o status do usuário">
                                                    </app-control-field-error>
                                                </div>
                                                <!-- end select status-->
                                                <!-- select profile-->
                                                <div class="col-sm-6">
                                                    <div class="form-group profile" [ngClass]="applyCssError(f, profile)">
                                                        <label class="control-label">Perfil</label>
                                                        <select class="form-control" name="profile" id="user_profile" [(ngModel)]="user.profile" #profile="ngModel" required>
                                                          <option disabled> Perfil</option>
                                                          <option *ngFor="let profile of profiles" [value]="profile.id">{{profile.title}}</option>
                                                        </select>
                                                        <app-control-field-error [showError]="verifyValidSubmitted(f, profile)" msgError="Selecione um perfil">
                                                        </app-control-field-error>
                                                    </div>
                                                </div>
                                                <!-- end select profile-->

                                                <!-- select type-->
                                                <div class="col-sm-6">
                                                    <div class="form-group type" [ngClass]="applyCssError(f, type)">
                                                        <label class="control-label">Tipo de usuário</label>
                                                        <select class="form-control" name="type" id="user_type" [(ngModel)]="user.type" #type="ngModel" (change)="selectType()" required>
                                                          <option disabled >Tipo de Usuário</option>
                                                          <option *ngFor="let type of types" [value]="type.id">{{type.description}}</option>
                                                        </select>
                                                        <app-control-field-error [showError]="verifyValidSubmitted(f, type)" msgError="Selecione um tipo de usuário">
                                                        </app-control-field-error>
                                                    </div>
                                                </div>
                                                <!-- end select type-->
                                                <div class="form-group" [ngClass]="applyCssError(f, login)">
                                                    <label class="control-label">Login</label>
                                                    <input type="text" [(ngModel)]="user.login" #login="ngModel" name="login" id="user_login" class="form-control" placeholder="Login" required>
                                                    <app-control-field-error [showError]="verifyValidSubmitted(f, login)" msgError="Digite um login">
                                                    </app-control-field-error>
                                                </div>
                                                <div class="form-group">
                                                    <label class="control-label">Senha</label>
                                                    <input type="password" [(ngModel)]="user.password" #password="ngModel" name="password" id="user_password" class="form-control" required minlength="8" placeholder="Inserir uma senha">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </section>
                        </div>
                    </div>
                    <!-- /.tab-pane -->
                    <div class="tab-pane" id="tab_2">
                        <div class="content">
                            <section class="content">
                                <div class="box-header with-border">
                                    <h5 class="box-title"> Informações Pessoais
                                    </h5>
                                </div>
                                <div class="row">
                                    <div class="col-sm-12">
                                        <div class="box box-primary">
                                            <div class="box-body">
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="form-group left" [ngClass]="applyCssError(f, name)">
                                                            <label class="control-label">Nome</label>
                                                            <input type="text" #name="ngModel" [(ngModel)]="first_name" name="first_name" id="first_name" class="form-control" placeholder="Nome" required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, name)" msgError="Digite um nome">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group" [ngClass]="applyCssError(f, name)">
                                                            <label class="control-label">Sobrenome</label>
                                                            <input type="text" #name="ngModel" [(ngModel)]="last_name" name="last_name" id="last_name" class="form-control" placeholder="Sobrenome" required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, name)" msgError="Digite um nome">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <div class="form-group" [ngClass]="applyCssError(f, email)">
                                                            <label class="control-label">E-mail</label>
                                                            <input type="email" [(ngModel)]="user.email" #email="ngModel" name="email" id="user_email" class="form-control" placeholder="Inserir E-mail ..." ngModel email required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, email)" msgError="E-mail válido">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="form-group left" [ngClass]="applyCssError(f, rg)" *ngIf="!show_pjur">
                                                            <label class="control-label">RG</label>
                                                            <input type="text" [(ngModel)]="person.rg" #rg="ngModel" name="rg" id="user_rg" class="form-control" placeholder="Inserir RG ..." required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, rg)" msgError="RG">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group" [ngClass]="applyCssError(f, emitter)" *ngIf="!show_pjur">
                                                            <label class="control-label">Orgão Emissor</label>
                                                            <input type="text" #emitter="ngModel" [(ngModel)]="person.emitter" name="rg_emitter" id="user_rgemitter" class="form-control" placeholder="Inserir Orgão Emissor ..." required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, emitter)" msgError="Orgão Emissor">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col">
                                                        <div class="form-group" [ngClass]="applyCssError(f, cpf)" *ngIf="!show_pjur">
                                                            <label class="control-label">CPF</label>
                                                            <input type="text" [(ngModel)]="person.cpf" #cpf="ngModel" name="cpf" pattern="[0-9]{11}" id="user_cpf" minlength="11" maxlength="11" class="form-control" placeholder="CPF" required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, cpf)" msgError="CPF Inválido">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="row">
                                                    <div class="col-sm-6">
                                                        <div class="form-group left" [ngClass]="applyCssError(f, ie)" *ngIf="show_pjur">
                                                            <label class="control-label">Inscrição Estadual</label>
                                                            <input type="text" #ie="ngModel" [(ngModel)]="org.ie" name="ie" id="user_ie" class="form-control" placeholder="Inscrição Estadual" required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, ie)" msgError="Digite uma inscrição estadual">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                    <div class="col-sm-6">
                                                        <div class="form-group" [ngClass]="applyCssError(f, cnpj)" *ngIf="show_pjur">
                                                            <label class="control-label">CNPJ</label>
                                                            <input type="text" [(ngModel)]="org.cnpj" #cnpj="ngModel" name="cnpj" pattern="[0-9]{14}" id="user_cnpj" minlength="14" maxlength="14" class="form-control" placeholder="CNPJ" required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, cnpj)" msgError="CNPJ Inválido">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <div class="form-group" [ngClass]="applyCssError(f, socialname)" *ngIf="show_pjur">
                                                            <label class="control-label">Razão Social</label>
                                                            <input type="text" #socialname="ngModel" [(ngModel)]="org.social_name" name="social_name" id="user_socialname" class="form-control" placeholder="Razão Social" required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, socialname)" msgError="Digite uma razão social">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col">
                                                        <div class="form-group" [ngClass]="applyCssError(f, fantasyname)" *ngIf="show_pjur">
                                                            <label class="control-label">Nome Fantasia</label>
                                                            <input type="text" #fantasyname="ngModel" [(ngModel)]="org.fantasy_name" name="fantasy_name" id="user_fantasyname" class="form-control" placeholder="Nome Fantasia" required>
                                                            <app-control-field-error [showError]="verifyValidSubmitted(f, fantasyname)" msgError="Digite um nome fantasia">
                                                            </app-control-field-error>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                    <!-- /.tab-pane -->
                    <div class="tab-pane" id="tab_3">
                        <div class="content">
                            <section class="content">                                
                                    <div class="box-header with-border">
                                        <h5 class="box-title"> Informações de Endereço
                                        </h5>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="box box-primary">
                                                <div class="box-body">
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="form-group left" [ngClass]="applyCssError(f, street)">
                                                                <label class="control-label">Rua</label>
                                                                <input type="text" #street="ngModel" [(ngModel)]="user.address.street" name="street" id="user_street" class="form-control" placeholder="Rua" required>
                                                                <app-control-field-error [showError]="verifyValidSubmitted(f, street)" msgError="Digite uma rua">
                                                                </app-control-field-error>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="form-group" [ngClass]="applyCssError(f, number)">
                                                                <label class="control-label">Número</label>
                                                                <input type="text" #number="ngModel" [(ngModel)]="user.address.number" name="number" id="user_number" class="form-control" placeholder="Número" required>
                                                                <app-control-field-error [showError]="verifyValidSubmitted(f, number)" msgError="Digite um número">
                                                                </app-control-field-error>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="form-group left" [ngClass]="applyCssError(f, neighborhood)">
                                                                <label class="control-label">Bairro</label>
                                                                <input type="text" #neighborhood="ngModel" [(ngModel)]="user.address.neighborhood" name="neighborhood" id="user_neighborhood" class="form-control" placeholder="Bairro" required>
                                                                <app-control-field-error [showError]="verifyValidSubmitted(f, neighborhood)" msgError="Digite um bairro">
                                                                </app-control-field-error>
                                                            </div>
                                                        </div>

                                                        <div class="col-sm-6">
                                                            <div class="form-group">
                                                                <label class="control-label">Complemento</label>
                                                                <input type="text" [(ngModel)]="user.address.complement" name="complement" id="user_complement" class="form-control" placeholder="Complemento">
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="form-group left" [ngClass]="applyCssError(f, cep)">
                                                                <label class="control-label">CEP</label>
                                                                <input type="text" #cep="ngModel" [(ngModel)]="user.address.postalcode" name="cep" id="user_cep" class="form-control" placeholder="CEP" required>
                                                                <app-control-field-error [showError]="verifyValidSubmitted(f, cep)" msgError="Digite um CEP">
                                                                </app-control-field-error>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-sm-6">
                                                            <div class="form-group left" [ngClass]="applyCssError(f, state)">
                                                                <label class="control-label">Estado</label>
                                                                <select class="form-control" #state="ngModel" [(ngModel)]="user.address.state" name="state" id="user_state" (change)="loadCities($event.target.value)" required>
                                              <option disabled> Estado </option>
                                              <option *ngFor='let s of states' [value]='s.id'>{{s.name}}</option>
                                            </select>
                                                                <app-control-field-error [showError]="verifyValidSubmitted(f, state)" msgError="Selecione um estado">
                                                                </app-control-field-error>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-6">
                                                            <div class="form-group" [ngClass]="applyCssError(f, city)">
                                                                <label class="control-label">Cidade</label>
                                                                <select class="form-control" #city="ngModel" name="city_id_fk" id="user_city" [(ngModel)]="user.address.city" required>
                                            <option> Cidade </option>
                                            <option *ngFor="let c of cities" [value]='c.id'>{{c.name}}</option>
                                          </select>
                                                                <app-control-field-error [showError]="verifyValidSubmitted(f, city)" msgError="Selecione uma cidade">
                                                                </app-control-field-error>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>                               
                            </section>
                        </div>
                    </div>
                    <!-- /.tab-pane -->
                    <div class="content-control">
                        <div class="control">
                            <a href="{{previousTab}}" data-toggle="tab" (click)="isActive(false)">
                                <img src="../../../assets/img/global/ic_previous.png" />
                                <b>Anterior</b>
                            </a>
                            <a href="{{nextTab}}" data-toggle="tab" (click)="isActive(true)">
                                <b>Próximo</b>
                                <img src="../../../assets/img/global/ic_next.png" />
                            </a>
                        </div>
                    </div>
                    <div class="row footer">
                        <div class="col-md-3">
                            <div class="form-group">
                                <button class="btn btn-default btn-block" [routerLink]="['/user-list']" id="btn_return"> Cancelar</button>
                            </div>
                        </div>
                        <div class="col-md-3 col-md-offset-6">
                            <div class="form-group save">
                                <button data-toggle="modal" data-target="#modal-default" class="btn btn-primary btn-block" name="submit" id="btn_save" [disabled]="!enable_save">Cadastrar</button>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- /.tab-content -->
            </div>
            

        </form>
    </section>
</div>

<!-- Modal Delete -->
<div class="modal fade" id="modal-default" (click)='backToList()'>
    <div class="modal-dialog modal-sm">
        <div class="modal-content" [ngStyle]="object">
            <div class="modal-body">
                <div class="modal-icon">
                    <i class="material-icons" style="font-size: 60px;">done</i>
                </div>
                <h5> Cadastro realizado com Sucesso!</h5>
            </div>
            <div class="modal-footer" data-dismiss="modal" id="btn_confirm" (click)='backToList()'>
                <label>Fechar</label>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
