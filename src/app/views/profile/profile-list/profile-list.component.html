<simple-notifications></simple-notifications>

<app-profile (insertValue)="onInsertValue($event)" 
  (filterValue)="onFilter($event)"
  [edit]="edit"
  [selectedProfile]="selectedProfile"
  [profiles]="profiles">
</app-profile>
<!-- when there's not record -->
<div *ngIf="!hasdata">
  <section class="content">
      <div class="feedback-icon fa fa-users"></div><br><br>
      <span class="feedback-message">Não há dados cadastrados</span>
  </section>
</div>  
<div *ngIf="hasdata">  
  <div class="box">             
    <div class="row">
        <div class="col-sm-6">
          <div id="_filter" class="dataTables_filter">
            <label>
              Filtrar:<input type="text" class="form-control form-border " name="title" (keyup)="getProfile()" [(ngModel)]="filter.title" placeholder="Tipo de Perfil">
            </label>
          </div>
        </div>
        <div class="col-sm-6 show_dates">
            <span *ngIf="paginate.totalElements">
              Exibindo {{ paginate.first ? 1 : (paginate.number * paginate.size) + 1 }} a {{ paginate.last ? paginate.totalElements : ((paginate.number * paginate.size)  +  paginate.size) }} de {{ paginate.totalElements }} registros 
            </span>
            <span *ngIf="!paginate.totalElements">
                Exibindo 0 a 0 de registros
            </span>
        </div>        
    </div>
    <div class="box-body with-border">
      <table id="example2" class="table table-hover ">
        <thead>
          <tr>
            <th class="tbl-left">Título
              <span class="glyphicon" ></span>
            </th>           
            <th colspan="3" class="tbl-center"> Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of profiles">
            <td class="tbl-left">  
                {{ item.title }}
            </td>         
            <td class="tbl-right">              
              <a (click)="setProfile(item)" [routerLink]="['/page-list']" title="Permissões">
                  <i class="large material-icons">lock</i>
              </a>
            </td>
            <td class="tbl-right">          
              <a (click)="editProfile(item)">
                  <i class="fa fa-pencil fa-fw show-icon"></i>
              </a>
            </td>
            <td class="tbl-right">  
                <a href="" [title]="item.status === true ? 'Desativar': 'Ativar'"
                  data-toggle="modal" data-target="#modal-default"
                  (click)="changeStatus(item)">              
                  <i [ngClass]="item.status === true ? 'fa fa-toggle-on': 'fa fa-toggle-off' "  aria-hidden="true"></i>
                </a>  
            </td>         
          </tr>
        </tbody>
      </table>
    </div>        
    <div class="box-footer">
        <app-paginate [paginate]="paginate" (eventPage)="setPage($event)"></app-paginate>     
    </div>
  </div>
</div>

 <!-- Modal Delete -->
 <div class="modal fade" id="modal-default">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true"></span></button>
          <h4 class="modal-title" *ngIf="profile.status"> Deseja realmente Desativar o perfil {{ profile.title | uppercase}}?</h4>
          <h4 class="modal-title" *ngIf="!profile.status"> Deseja realmente Ativar o perfil {{ profile.title | uppercase}}?</h4>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Cancelar</button>
        <button type="button" (click)="disableProfile()" class="btn btn-primary" data-dismiss="modal">Confirmar</button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
