<simple-notifications></simple-notifications>
<!-- <button data-toggle="modal" data-target="#modal-default" id="openModalButton">Open Modal</button> -->
<!-- <button data-toggle="modal" data-target="#modal-cancel" id="openModalCancel">Open Modal</button> -->
<div class="content_">
    <div class="content-top">
        <div class="content_fa"> <i class="fa fa-user"></i> Família > Criança > Editar</div>
    </div>

    <section class="content_user">
      <div class="content-header ">
        <h5 class="content-title">CRIANÇA</h5>
      </div>
      <!-- <form name="form" (ngSubmit)="f.form.valid && saveData()" #f="ngForm" novalidate> -->
          <!-- Custom Tabs -->
        <div class="nav-tabs-custom">
          <ul class="nav nav-tabs">
              <li>
                <!-- <a class="tab-pane active" (click)="walk(0)" href="#tab_1" data-toggle="tab"> -->
                  <label class="lb-tab"> Informações Pessoais </label>
                  <img src="{{ data1Tab }}"/>
                <!-- </a>               -->
              </li>
              <li>
                <!-- <a class="tab-pane" (click)="walk(1)" href="#tab_2" data-toggle="tab"> -->
                  <label class="lb-tab"> Informações Sociais </label>
                  <img src="{{ data2Tab }}"/>
                <!-- </a>                -->
              </li>                
          </ul>
          <div class="tab-content">
            <div class="tab-pane active" id="tab_1">
              <div class="content">
                <section class="content">
                  <div class="box-header with-border">
                      <h5 class="box-title"> Informações Pessoais
                      </h5>
                  </div>                  
                  <div class="row">
                    <div class="col-sm-12">
                      <form name="form" (ngSubmit)="save(1,f1.valid)" id="f_1" #f1="ngForm" novalidate>
                        <div class="box box-primary">
                          <div class="box-body">                            
                            <!-- <div class="row">
                              <div class="col-sm-6">                              
                                <div class="form-group" [ngClass]="applyCssError(f1, childUC)">
                                  <label class="control-label">UC</label>
                                  <select class="form-control" #childUC="ngModel" name="child_uc" [(ngModel)]="child.uc" id="child_uc" required>
                                    <option value="true">UC 1</option>
                                    <option value="false">UC 2</option>
                                  </select>
                                  <app-control-field-error [showError]="verifyValidSubmitted(f1, childUC)" msgError="Selecione o UC">
                                  </app-control-field-error>
                                </div>                                 
                              </div>
                              <div class="col-sm-6">
                                <div class="form-group" [ngClass]="applyCssError(f1, childRegional)">
                                  <label class="control-label">Regional</label>
                                  <input class="form-control" #childRegional="ngModel" [(ngModel)]="child.regional" name="child_regional" id="child_regional" placeholder="Regional" required>
                                  <app-control-field-error [showError]="verifyValidSubmitted(f1, childRegional)" msgError="Selecione um regional">
                                  </app-control-field-error>
                                </div>
                              </div> 
                            </div> -->
                            <!-- <div class="row">                              
                              <div class="col-sm-12">
                                <div class="form-group" [ngClass]="applyCssError(f1, childCommunity)">
                                  <label class="control-label">Comunidade</label>
                                  <select class="form-control" #childCommunity="ngModel" name="childCommunity" [(ngModel)]="child.community_id" id="child_community" required>
                                    <option [value]="item.id" *ngFor="let item of communities"> {{ item.name }}</option>
                                  </select>                                
                                  <app-control-field-error [showError]="verifyValidSubmitted(f1, childCommunity)" msgError="Selecione uma comunidade">
                                  </app-control-field-error>
                                </div>
                              </div>                            
                                
                            </div> -->
                            <div class="row">
                              <div class="col-sm-12">
                                <div class="form-group" [ngClass]="applyCssError(f1, nameChild)">
                                  <label class="control-label">Nome completo da criança</label>
                                  <input type="text" #nameChild="ngModel" name="name_child" [(ngModel)]="child.name" id="name_child" class="form-control" placeholder="Nome completo da criança" required>
                                  <app-control-field-error [showError]="verifyValidSubmitted(f1, nameChild)" msgError="Digite um nome para a criança">
                                  </app-control-field-error>
                                </div>
                              </div>
                            </div>                                           
                            <div class="row">
                              <div class="col-sm-6">
                                <div class="form-group" [ngClass]="{ 'has-error': !isValidDate }">
                                  <label class="control-label">Data de nascimento</label>
                                  <my-date-picker 
                                    name="dateBirth" [options]="myDatePickerOptions" id="dateBirth"
                                    [selDate]="selDate"                                    
                                    (dateChanged)="onDateChanged($event)"
                                    (inputFieldChanged)="onInputFieldChanged($event)"
                                    required>
                                  </my-date-picker>
                                  <div *ngIf="!isValidDate" class="help-block"> Data de nascimento inválida</div>
                                </div>                       
                              </div>
                              <div class="col-sm-6">
                                <div class="form-group" [ngClass]="applyCssError(f1, gender)">
                                  <label class="control-label">Sexo</label> <br/>                                  
                                  <label class="radio-inline">                          
                                    <input type="radio" #gender="ngModel" name="gender" [(ngModel)]="child.gender" id="gender" value="FEMALE" required>
                                    Feminino
                                  </label>
                                  <label class="radio-inline"> 
                                    <input type="radio" #gender="ngModel" name="gender" [(ngModel)]="child.gender" id="gender" value="MALE" required>
                                    Masculino
                                  </label>    
                                  <app-control-field-error [showError]="verifyValidSubmitted(f2, gender)" msgError="Escolha uma das alternativas">
                                  </app-control-field-error>  
                                </div>                                
                              </div>
                              <!-- <div class="col-sm-4">
                                <div class="form-group" [ngClass]="applyCssError(f1, age)">
                                  <label class="control-label">Idade</label>
                                  <select class="form-control" name="age" id="age" #age="ngModel" [(ngModel)]="child.age" required>
                                    <option value="1"> 0 a 3 meses</option>
                                    <option value="2"> 3 a 6 meses</option>
                                    <option value="3"> 6 a 9 meses</option>
                                    <option value="4"> 9 a 12 meses</option>
                                    <option value="5"> 1 a 2 anos</option>
                                    <option value="6"> 2 a 3 anos</option>
                                    <option value="7"> 3 a 4 anos</option>
                                    <option value="8"> 4 a 5 anos</option>
                                    <option value="9"> 5 a 6 anos</option>
                                  </select>
                                  <app-control-field-error [showError]="verifyValidSubmitted(f2, age)" msgError="Escolha uma das alternativas">
                                  </app-control-field-error> 
                                </div>
                              </div> -->
                            </div>   
                            <div class="row">
                              <div class="col-sm-6">
                                <div class="form-group" [ngClass]="applyCssError(f1, nameMother)">
                                  <label class="control-label">Nome da Mãe</label>                                  
                                  <select #nameMother="ngModel" name="name_mother" [(ngModel)]="child.mother_id" id="name_mother" class="form-control">
                                    <option [value]="item.id" *ngFor="let item of mothers">
                                      {{ item.name }}
                                    </option>
                                  </select>
                                  <app-control-field-error [showError]="verifyValidSubmitted(f1, nameMother)" msgError="Digite um nome para a mãe da criança">
                                  </app-control-field-error>
                                </div>
                              </div>
                              <div class="col-sm-6">
                                <div class="form-group">
                                  <label class="control-label">Nome do pai</label>
                                  <input type="text" #fatherName="ngModel" name="fatherName" [(ngModel)]="child.father_name" id="fatherName" class="form-control" placeholder="Nome completo do pai">                                 
                                </div>
                              </div>
                            </div> 
                            <div class="row">
                              <div class="col-sm-12">
                                <div class="form-group" [ngClass]="applyCssError(f1, nameResponsible)">
                                  <label class="control-label">Nome do Responsável</label>                                  
                                  <select #nameResponsible="ngModel" name="nameResponsible" [(ngModel)]="child.responsible_id" id="nameResponsible" class="form-control" required>
                                    <option [value]="item.id" *ngFor="let item of responsible">
                                      {{ item.name }}
                                    </option>
                                  </select>
                                  <app-control-field-error [showError]="verifyValidSubmitted(f1, nameResponsible)" msgError="Digite um nome para o responsável da criança">
                                  </app-control-field-error>
                                </div>
                              </div>
                            </div>             
                          </div>
                        </div>
                        <div class="content-control">
                          <div class="control">
                            <a href="{{previousTab}}" data-toggle="tab" (click)="isActive(false, 1, 0)" id="btn_previous">
                                <img src="./assets/img/global/ic_previous.png" />
                                <b>Anterior</b>
                            </a>
                            <a href="{{nextTab}}" data-toggle="tab" (click)="isActive(true, 1)" id="btn_next">
                                <b>Próximo</b>
                                <img src="./assets/img/global/ic_next.png" />
                            </a>
                            <button type="submit" id="btn_tab1"></button>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <div class="form-group">
                            <button class="btn btn-default btn-block" (click)="openModal()" id="btn_return1"> Cancelar</button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>

                </section>
              </div>
            </div>
            <!-- /.tab-pane -->
            <div class="tab-pane" id="tab_2">
              <div class="content">
                <section class="content">
                  <div class="box-header with-border">
                      <h5 class="box-title"> Informações Sociais
                      </h5>
                  </div>
                  <div class="row">
                    <div class="col-sm-12">
                      <form name="form" (ngSubmit)="saveData(f2.valid) && save(2, f2.valid)" #f2="ngForm" novalidate>
                        <div class="box box-primary">
                          <div class="box-body">          
                            <div class="row">
                              <div class="col-sm-4">
                                <div class="form-group" [ngClass]="applyCssError(f2, hasCivilRegistration)">
                                  <label class="control-label">A criança possui registro civil?</label> <br/>
                                  <label class="radio-inline">                          
                                    <input type="radio" #hasCivilRegistration="ngModel" name="hasCivilRegistration" [(ngModel)]="child.has_civil_registration" id="hasCivilRegistration" [value]="true" required>
                                    Sim
                                  </label>
                                  <label class="radio-inline"> 
                                    <input type="radio" #hasCivilRegistration="ngModel" name="hasCivilRegistration" [(ngModel)]="child.has_civil_registration" id="hasCivilRegistration" [value]="false" required>
                                    Não
                                  </label>    
                                  <app-control-field-error [showError]="verifyValidSubmitted(f2, hasCivilRegistration)" msgError="Escolha uma das alternativas">
                                  </app-control-field-error>                            
                                </div>
                              </div> 
                              
                              <div class="col-sm-4">
                                <div class="form-group" [ngClass]="applyCssError(f2, isInSocialProgram)">
                                  <label class="control-label">A criança participa de outros programas sócio-educativos</label> <br/>
                                  <label class="radio-inline">                          
                                    <input type="radio" #isInSocialProgram="ngModel" name="isInSocialProgram" [(ngModel)]="child.is_in_social_program" id="isInSocialProgram" [value]="true" required>
                                    Sim
                                  </label>
                                  <label class="radio-inline"> 
                                    <input type="radio" #isInSocialProgram="ngModel" name="isInSocialProgram" [(ngModel)]="child.is_in_social_program" id="isInSocialProgram" [value]="false" required>
                                    Não
                                  </label>
                                  <app-control-field-error [showError]="verifyValidSubmitted(f2, isInSocialProgram)" msgError="Escolha uma das alternativas">
                                  </app-control-field-error>
                                </div>
                              </div>    
                              <div class="col-sm-4">                                
                                <div class="row">
                                  <div class="col-xs-8 col-sm-6">
                                    <div class="form-group" [ngClass]="applyCssError(f2, isPrematureBorn)">
                                      <label class="control-label">Nascimento prematuro?</label> <br/>
                                      <label class="radio-inline">                          
                                        <input type="radio" #isPrematureBorn="ngModel" name="isPrematureBorn" [(ngModel)]="child.is_premature_born" id="isPrematureBorn" [value]="true" required>
                                        Sim
                                      </label>
                                      <label class="radio-inline"> 
                                        <input type="radio" #isPrematureBorn="ngModel" name="isPrematureBorn" [(ngModel)]="child.is_premature_born" id="isPrematureBorn" [value]="false" required>
                                        Não
                                      </label>    
                                      <app-control-field-error [showError]="verifyValidSubmitted(f2, isPrematureBorn)" msgError="Escolha uma das alternativas">
                                      </app-control-field-error>                            
                                    </div>
                                  </div>
                                  <div class="col-xs-4 col-sm-6">
                                    <div class="form-group" [ngClass]="applyCssError(f2, bornWeek)" *ngIf="child.is_premature_born">
                                      <label class="control-label">Nº de semanas</label>
                                      <input type="number" #bornWeek="ngModel" mask="0000000000" name="bornWeek" id="bornWeek" [(ngModel)]="child.born_week" class="form-control" placeholder="Nº de semanas" required>
                                      <app-control-field-error [showError]="verifyValidSubmitted(f2, bornWeek)" msgError="Digite o número de semanas">
                                      </app-control-field-error>
                                    </div>    
                                  </div>
                                </div>                                
                              </div>    
                                                              
                            </div> 
                            <div class="row">
                              <div class="col-sm-12" *ngIf="child.has_civil_registration === false">
                                <div class="form-group" [ngClass]="applyCssError(f2, civilRegJustificative)">
                                  <label class="control-label">Justifique</label>
                                  <textarea type="text" #civilRegJustificative="ngModel" name="civilRegJustificative" id="civilRegJustificative" 
                                    [(ngModel)]="child.civil_reg_justificative" class="form-control" 
                                    placeholder="Por que a criança não possui registro civil? " required>
                                  </textarea>
                                  <app-control-field-error [showError]="verifyValidSubmitted(f2, civilRegJustificative)" msgError="Justifique a ausência do registro civil">
                                  </app-control-field-error>
                                </div>                              
                              </div> 
                            </div>                           
                            <div class="row">
                              <div class="col-sm-4">
                                <div class="form-group" [ngClass]="applyCssError(f2, isMmensalyWeighted)">
                                  <label class="control-label">A criança está sendo pesada mensalmente?</label> <br/>
                                  <label class="radio-inline">                          
                                    <input type="radio" #isMmensalyWeighted="ngModel" name="isMmensalyWeighted" [(ngModel)]="child.is_mensaly_weighted" id="isMmensalyWeighted" [value]="true" required>
                                      Sim
                                  </label>
                                  <label class="radio-inline"> 
                                    <input type="radio" #isMmensalyWeighted="ngModel" name="isMmensalyWeighted" [(ngModel)]="child.is_mensaly_weighted" id="isMmensalyWeighted" [value]="false" required>
                                    Não
                                  </label>    
                                  <app-control-field-error [showError]="verifyValidSubmitted(f2, isMmensalyWeighted)" msgError="Escolha uma das alternativas">
                                  </app-control-field-error>                                 
                                </div>
                              </div>
                              <div class="col-sm-4">
                                <div class="form-group" [ngClass]="applyCssError(f2, isVacinationUptodate)">
                                  <label class="control-label">O calendário de vacinação da criança está em dia?</label> <br/>
                                  <label class="radio-inline">                          
                                    <input type="radio" #isVacinationUptodate="ngModel" name="isVacinationUptodate" [(ngModel)]="child.is_vacination_uptodate" id="isVacinationUptodate" [value]="true" required>
                                    Sim
                                  </label>
                                  <label class="radio-inline"> 
                                    <input type="radio" #isVacinationUptodate="ngModel" name="isVacinationUptodate" [(ngModel)]="child.is_vacination_uptodate" id="isVacinationUptodate" [value]="false" required>
                                    Não
                                  </label>    
                                  <app-control-field-error [showError]="verifyValidSubmitted(f2, isVacinationUptodate)" msgError="Escolha uma das alternativas">
                                  </app-control-field-error>        
                                </div>
                              </div>
                              <div class="col-sm-4">
                                <div class="form-group" [ngClass]="applyCssError(f2, hasRelationDiff)">
                                  <label class="control-label">A criança apresenta dificuldade para se relacionar com outras crianças?</label> <br/>
                                  <label class="radio-inline">                          
                                    <input type="radio" #hasRelationDiff="ngModel" name="hasRelationDiff" [(ngModel)]="child.has_relation_diff" id="hasRelationDiff" [value]="true" required>
                                    Sim
                                  </label>
                                  <label class="radio-inline"> 
                                    <input type="radio" #hasRelationDiff="ngModel" name="hasRelationDiff" [(ngModel)]="child.has_relation_diff" id="hasRelationDiff" [value]="false" required>
                                    Não
                                  </label>    
                                  <app-control-field-error [showError]="verifyValidSubmitted(f2, hasRelationDiff)" msgError="Escolha uma das alternativas">
                                  </app-control-field-error>        
                                </div>
                              </div>
                            </div>
                            <div class="row">
                              <div class="col-sm-4">
                                <div class="form-group" [ngClass]="{ 'has-error': f2.submitted && who_take_care_list.length === 0 }">
                                  <label class="control-label">Quem cuida da criança? </label>                                 
                                  <div class="checkbox" *ngFor="let item of _who_take_care">  
                                    <label>
                                      <input type="checkbox" name="_who_take_care"  
                                      id="_who_take_care" [value]="item.description" 
                                      [checked]="item.checked"
                                      (change)="verifyCheckbox(1, $event)" required>
                                      {{ item.description }}
                                    </label>    
                                  </div>
                                  <div *ngIf="f2.submitted && who_take_care_list.length === 0" class="help-block"> Escolha uma ou mais alternativas</div>        
                                </div>
                              </div>   
                              <div class="col-sm-4">                                
                                <div class="row">
                                  <div class="col">
                                    <div class="form-group"  [ngClass]="applyCssError(f2, hasEducationDifficulty)">
                                      <label class="control-label">A família encontra alguma dificuldade para educar a criança? </label>
                                      <div class="radio-inline">      
                                        <label>
                                          <input type="radio" #hasEducationDifficulty="ngModel" [(ngModel)]="child.has_education_diff" name="hasEducationDifficulty" id="hasEducationDifficulty" [value]="true" required>
                                          Sim
                                        </label>
                                      </div>
                                      <div class="radio-inline"> 
                                        <label>
                                          <input type="radio" #hasEducationDifficulty="ngModel" [(ngModel)]="child.has_education_diff" name="hasEducationDifficulty" id="hasEducationDifficulty" [value]="false" required>
                                          Não
                                        </label>                                  
                                      </div>    
                                      <app-control-field-error [showError]="verifyValidSubmitted(f2, hasEducationDifficulty)" msgError="Escolha uma das alternativas">
                                      </app-control-field-error>                    
                                    </div>   
                                  </div>
                                  <div class="col">
                                    <div class="form-group" [ngClass]="applyCssError(f2, educationDiffSpecification)" *ngIf="child.has_education_diff">
                                      <label class="label-control"> Justifique</label>
                                      <textarea class="form-control" #educationDiffSpecification="ngModel"  [(ngModel)]="child.education_diff_specification" name="educationDiffSpecification" id="educationDiffSpecification" required>
                                      </textarea>
                                      <app-control-field-error [showError]="verifyValidSubmitted(f2, educationDiffSpecification)" msgError="Especifique a dificuldade para educar a criança">
                                      </app-control-field-error>
                                    </div>                                      
                                  </div>                            
                                </div>                                
                              </div>   
                              <div class="col-sm-4">
                                <div class="form-group" [ngClass]="applyCssError(f2, playsWithWho)">
                                  <label class="control-label">Com quem a criança brinca?</label>
                                  <select class="form-control" name="playsWithWho" id="playsWithWho" #playsWithWho="ngModel" [(ngModel)]="child.plays_with_who" required>
                                    <option value="Com adulto"> Com adulto</option>
                                    <option value=" Com adulto e criança"> Com adulto e criança</option>
                                    <option value="Com criança"> Com criança</option>
                                    <option value="Sozinha"> Sozinha</option>
                                  </select>
                                  <app-control-field-error [showError]="verifyValidSubmitted(f2, playsWithWho)" msgError="Selecione com quem a criança brinca">
                                  </app-control-field-error> 
                                </div>
                              </div>                                
                              </div>                          
                            </div>
                        </div>
                        <div class="content-control">
                          <div class="control">
                            <a href="{{previousTab}}" data-toggle="tab" (click)="isActive(false, 2, 0)" id="btn_previous">
                                <img src="./assets/img/global/ic_previous.png" />
                                <b>Anterior</b>
                            </a>                           
                            <button type="submit" id="btn_tab2"></button>
                          </div>
                        </div>
                        <div class="col-md-3">
                          <div class="form-group">
                            <button class="btn btn-default btn-block" (click)="openModal()" id="btn_return3"> Cancelar</button>
                          </div>
                        </div>
                        <div class="col-md-3 col-md-offset-6">
                          <div class="form-group save">
                            <button class="btn btn-primary btn-block"  (click)="isSave()" name="submit" id="btn_save" [disabled]="!enable_save" *ngIf="isNewData && canCreate">Cadastrar</button>
                            <button class="btn btn-primary btn-block"  (click)="isSave()" name="submit" id="btn_save" [disabled]="!enable_save" *ngIf="!isNewData && canUpdate">Salvar</button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </section>
              </div>
            </div>      
          </div>
          <!-- /.tab-content -->
        </div>
      <!-- </form> -->
    </section>
</div>

<app-modal></app-modal> 

<!-- Modal Add -->
<!-- <div class="modal fade" id="modal-default" (click)='backToList()'>
    <div class="modal-dialog modal-sm">
        <div class="modal-content" [ngStyle]="object">
            <div class="modal-body">
                <div class="modal-icon">
                    <i class="material-icons" style="font-size: 60px;">done</i>
                </div>
                <h5> Cadastro realizado com Sucesso!</h5>
            </div>
            <div class="modal-footer" data-dismiss="modal" id="btn_confirm" (click)='backToList()'>
                <label>Fechar</label>
            </div>
        </div> -->
        <!-- /.modal-content -->
    <!-- </div> -->
    <!-- /.modal-dialog -->
<!-- </div> -->
<!-- /.modal -->

